name: Todo App Pipeline
on: [push]
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - run: |
          echo "Working directory: $(pwd)"
          ls -la
          test -f app.py && echo "âœ… app.py FOUND"
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: docker build -t todo-app .
      - run: |
          docker run -d --name test -p 5000:5000 todo-app
          sleep 20
          curl http://localhost:5000 && echo "SUCCESS" || docker logs test
